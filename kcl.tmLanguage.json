{
  "name": "KCL",
  "scopeName": "source.kcl",
  "fileTypes": ["kcl"],
  "uuid": "1ec087d3-5945-49c4-94a0-ce9c757dc153",
  "patterns": [
    {
      "name": "comment.line.shebang.kcl",
      "match": "^#![^\n]*"
    },
    {
      "name": "comment.line.documentation.module.kcl",
      "match": "//![^\n]*"
    },
    {
      "name": "comment.line.documentation.kcl",
      "match": "///[^\n]*"
    },
    {
      "name": "comment.line.double-slash.kcl",
      "match": "//[^\n]*"
    },
    {
      "name": "keyword.control.conditional.kcl",
      "match": "\\b(if|else)\\b"
    },
    {
      "name": "keyword.control.return.kcl",
      "match": "\\breturn\\b"
    },
    {
      "name": "keyword.control.function.kcl",
      "match": "\\bfn\\b"
    },
    {
      "name": "storage.modifier.export.kcl",
      "match": "\\bexport\\b"
    },
    {
      "name": "meta.annotation.kcl",
      "begin": "@\\(",
      "beginCaptures": {
        "0": {
          "name": "punctuation.definition.annotation.begin.kcl"
        }
      },
      "end": "\\)",
      "endCaptures": {
        "0": {
          "name": "punctuation.definition.annotation.end.kcl"
        }
      },
      "patterns": [
        {
          "include": "#annotation-kv"
        },
        {
          "name": "punctuation.separator.comma.kcl",
          "match": ","
        }
      ]
    },
    {
      "name": "meta.import.kcl",
      "begin": "\\b(import)\\s+",
      "beginCaptures": {
        "1": {
          "name": "keyword.control.import.kcl"
        }
      },
      "end": "(?=\\n|;)|(?<=\\))",
      "patterns": [
        {
          "name": "string.quoted.double.kcl",
          "begin": "\"",
          "end": "\"",
          "beginCaptures": {
            "0": {
              "name": "punctuation.definition.string.begin.kcl"
            }
          },
          "endCaptures": {
            "0": {
              "name": "punctuation.definition.string.end.kcl"
            }
          },
          "patterns": [
            {
              "include": "#escape-sequence"
            }
          ]
        },
        {
          "name": "keyword.control.import.as.kcl",
          "match": "\\bas\\b"
        },
        {
          "name": "entity.name.import.alias.kcl",
          "match": "(?<=as\\s)\\w+"
        }
      ]
    },
    {
      "name": "entity.name.tag.kcl",
      "match": "\\$\\w+\\b"
    },
    {
      "name": "meta.function.declaration.kcl",
      "begin": "\\b(fn)\\s+(\\w+)\\s*(\\()",
      "beginCaptures": {
        "1": {
          "name": "keyword.control.function.kcl"
        },
        "2": {
          "name": "entity.name.function.kcl"
        },
        "3": {
          "name": "punctuation.section.parameters.begin.kcl"
        }
      },
      "end": "\\)",
      "endCaptures": {
        "0": {
          "name": "punctuation.section.parameters.end.kcl"
        }
      },
      "patterns": [
        {
          "include": "#parameter"
        },
        {
          "name": "punctuation.separator.parameter.kcl",
          "match": ","
        },
        {
          "include": "#comment"
        }
      ]
    },
    {
      "name": "meta.return-type.kcl",
      "begin": "(?<=\\))\\s*(\\?)?(:)",
      "beginCaptures": {
        "1": {
          "name": "keyword.operator.optional-return.kcl"
        },
        "2": {
          "name": "punctuation.separator.type.kcl"
        }
      },
      "end": "(?=\\{)",
      "patterns": [
        {
          "include": "#type-name"
        }
      ]
    },
    {
      "name": "meta.function.invocation.kcl",
      "match": "\\b(\\w+)\\s*(?=\\()",
      "captures": {
        "1": {
          "name": "entity.name.function.call.kcl"
        }
      }
    },
    {
      "include": "#anonymous-function"
    },
    {
      "name": "string.quoted.double.kcl",
      "begin": "\"",
      "end": "\"",
      "beginCaptures": {
        "0": {
          "name": "punctuation.definition.string.begin.kcl"
        }
      },
      "endCaptures": {
        "0": {
          "name": "punctuation.definition.string.end.kcl"
        }
      },
      "patterns": [
        {
          "include": "#escape-sequence"
        }
      ]
    },
    {
      "name": "keyword.operator.control.pipeline.kcl",
      "match": "\\|>"
    },
    {
      "name": "variable.language.pipe-substitution.kcl",
      "match": "%"
    },
    {
      "match": "\\b(true|false)\\b",
      "name": "constant.language.boolean.kcl"
    },
    {
      "name": "constant.numeric.kcl",
      "match": "-?\\b\\d+(\\.\\d+)?([eE][+-]?\\d+)?\\b|-?\\.\\d+([eE][+-]?\\d+)?\\b"
    },
    {
      "name": "keyword.operator.comparison.kcl",
      "match": "(==|!=|<=|>=|<|>)"
    },
    {
      "name": "keyword.operator.logical.kcl",
      "match": "(&|\\|)(?!>)"
    },
    {
      "name": "keyword.operator.arithmetic.kcl",
      "match": "[+\\-*/^]"
    },
    {
      "name": "keyword.operator.assignment.kcl",
      "match": "="
    },
    {
      "name": "support.constant.prelude.kcl",
      "match": "\\b(ZERO|QUARTER_TURN|HALF_TURN|THREE_QUARTER_TURN)\\b"
    },
    {
      "name": "support.function.stdlib.kcl",
      "match": "\\b(abs|acos|appearance|arc|angledLine|angledLineOfXLength|angledLineOfYLength|angledLineThatIntersects|angledLineToX|angledLineToY|angleToMatchLengthX|angleToMatchLengthY|arc|asin|assert|assertEqual|assertGreaterThan|assertGreaterThanOrEq|assertLessThan|assertLessThanOrEq|atan|bezierCurve|ceil|chamfer|circle|clone|close|cm|cos|e|extrude|fillet|floor|ft|getNextAdjacentEdge|getOppositeEdge|getPreviousAdjacentEdge|helix|hole|hollow|import|inch|int|lastSegX|lastSegY|legAngX|legAngY|legLen|line|lineTo|ln|loft|log|log10|log2|m|map|max|min|mirror2d|mm|offsetPlane|patternCircular2d|patternCircular3d|patternLinear2d|patternLinear3d|patternTransform|pi|polar|polygon|pow|profileStart|profileStartX|profileStartY|push|reduce|rem|revolve|rotate|segAng|segEnd|segEndX|segEndY|segLen|segStart|segStartX|segStartY|shell|sin|sqrt|startProfile|startProfileAt|startSketchAt|startSketchOn|tan|tangentialArc|tangentialArcTo|tangentialArcToRelative|tau|toDegrees|toRadians|translate|xLine|xLineTo|yd|yLine|yLineTo)\\b"
    },
    {
      "name": "punctuation.section.array.begin.kcl",
      "match": "\\["
    },
    {
      "name": "punctuation.section.array.end.kcl",
      "match": "\\]"
    },
    {
      "name": "punctuation.section.block.begin.kcl",
      "match": "\\{"
    },
    {
      "name": "punctuation.section.block.end.kcl",
      "match": "\\}"
    },
    {
      "name": "punctuation.separator.colon.kcl",
      "match": ":"
    },
    {
      "name": "punctuation.separator.comma.kcl",
      "match": ","
    },
    {
      "name": "variable.parameter.named.kcl",
      "match": "(?<=\\(|,)\\s*(\\w+)\\s*(?==)",
      "captures": {
        "1": {
          "name": "variable.parameter.kcl"
        }
      }
    },
    {
      "name": "variable.other.kcl",
      "match": "\\b(\\w+)\\b"
    }
  ],
  "repository": {
    "comment": {
      "patterns": [
        {
          "name": "comment.line.documentation.module.kcl",
          "match": "//![^\n]*"
        },
        {
          "name": "comment.line.documentation.kcl",
          "match": "///[^\n]*"
        },
        {
          "name": "comment.line.double-slash.kcl",
          "match": "//[^\n]*"
        }
      ]
    },
    "escape-sequence": {
      "name": "constant.character.escape.kcl",
      "match": "\\\\(\"|\\\\|/|b|f|n|r|t|u[0-9a-fA-F]{4})"
    },
    "parameter": {
      "patterns": [
        {
          "name": "meta.parameter.kcl",
          "match": "(@)?(\\w+)(\\?)?(?:\\s*(:)\\s*(\\w+))?",
          "captures": {
            "1": {
              "name": "storage.modifier.parameter-attribute.kcl"
            },
            "2": {
              "name": "variable.parameter.kcl"
            },
            "3": {
              "name": "keyword.operator.optional.kcl"
            },
            "4": {
              "name": "punctuation.separator.type.kcl"
            },
            "5": {
              "name": "support.type.kcl"
            }
          }
        }
      ]
    },
    "type-name": {
      "patterns": [
        {
          "name": "meta.type.union.kcl",
          "match": "(\\w+)(?:\\s*(\\()\\s*(\\w+)\\s*(\\)))?",
          "captures": {
            "1": {
              "name": "support.type.kcl"
            },
            "2": {
              "name": "punctuation.section.type-units.begin.kcl"
            },
            "3": {
              "name": "support.type.unit.kcl"
            },
            "4": {
              "name": "punctuation.section.type-units.end.kcl"
            }
          }
        },
        {
          "name": "keyword.operator.type-union.kcl",
          "match": "\\|(?!>)"
        }
      ]
    },
    "annotation-kv": {
      "name": "meta.annotation.key-value.kcl",
      "match": "(\\w+)\\s*(=)\\s*(\\w+)",
      "captures": {
        "1": {
          "name": "entity.other.attribute-name.kcl"
        },
        "2": {
          "name": "keyword.operator.assignment.kcl"
        },
        "3": {
          "name": "string.unquoted.attribute-value.kcl"
        }
      }
    },
    "anonymous-function": {
      "name": "meta.function.anonymous.kcl",
      "begin": "(\\()(?=\\s*\\w+(?:\\s*,\\s*\\w+)*\\)\\s*=>)",
      "beginCaptures": {
        "1": {
          "name": "punctuation.section.parameters.begin.kcl"
        }
      },
      "end": "(=>)\\s*(\\{)",
      "endCaptures": {
        "1": {
          "name": "keyword.operator.fat-arrow.kcl"
        },
        "2": {
          "name": "punctuation.section.block.begin.kcl"
        }
      },
      "patterns": [
        {
          "name": "variable.parameter.kcl",
          "match": "\\b\\w+\\b"
        },
        {
          "name": "punctuation.separator.parameter.function.kcl",
          "match": ","
        },
        {
          "name": "punctuation.section.parameters.end.kcl",
          "match": "\\)"
        }
      ]
    }
  }
}
